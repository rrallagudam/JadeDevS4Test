<apex:page docType="html-5.0" sidebar="false" title="Integrations" controller="JBCXM.AdminBroker" tabStyle="Administration__tab" extensions="JBCXM.NSRemoting,JBCXM.GSCommonBroker">

   <!-- <script src="{!JSENCODE(URLFOR($Resource.JBCXM__GSVendor,'js/vendor/jquery/jquery-1.10.2.min.js'))}"></script>-->
    <script src="{!JSENCODE(URLFOR($Resource.GSVendor,'js/vendor/jquery/jquery-migrate-1.2.1.min.js'))}"></script>
    <!--<script src="{!JSENCODE(URLFOR($Resource.GSVendor,'js/vendor/jquery/jquery-UI-1.10/js/jquery.ui.min.js'))}"></script>-->
    <script src="{!JSENCODE(URLFOR($Resource.GSVendor,'js/vendor/FileSaver.min.js'))}"></script>
    <script src="{!JSENCODE(URLFOR($Resource.GSVendor,'js/vendor/grids/jqgrid-4.6.0/js/i18n/grid.locale-en.js'))}"></script>		    <script src="{!JSENCODE(URLFOR($Resource.jqGrid,'jqGridLatest/js/i18n/grid.locale-en.js'))}"></script>
    <script src="{!JSENCODE(URLFOR($Resource.GSVendor,'js/vendor/grids/jqgrid-4.6.0/js/jquery.jqGrid.min.js'))}"></script>
    <script src="{!JSENCODE(URLFOR($Resource.jqGrid,'js/jqgrid.Custom.Utility.js'))}"></script>

    <apex:stylesheet value="{!JSENCODE(URLFOR($Resource.JBCXM__jqGrid, 'css/ui.jqgrid.css'))}"/>
    <apex:stylesheet value="{!JSENCODE(URLFOR($Resource.JBCXM__GSVendor,'js/vendor/grids/slickgrid/slick.grid.css'))}" />
    <apex:stylesheet value="{!JSENCODE(URLFOR($Resource.JBCXM__GSVendor,'js/vendor/jquery/jquery.timepicker.css'))}" />
    <apex:stylesheet value="{!JSENCODE(URLFOR($Resource.JBCXM__JQuery, 'css/redmond/jquery-ui-1.8.11.custom.css'))}"/>
    <apex:stylesheet value="{!JSENCODE(URLFOR($Resource.JBCXM__colorpicker,'colorPicker.css'))}"/>

    <apex:includeScript value="{!JSENCODE(URLFOR($Resource.JBCXM__CustomJS, 'CustomJS/date.format.js'))}" />
    <script src="{!JSENCODE(URLFOR($Resource.CustomJS, 'CustomJS/jbaraCustomUtility.js'))}" ></script>
    <apex:includeScript value="{!JSENCODE(URLFOR($Resource.JBCXM__GSVendor,'js/vendor/jquery/jquery-1.10.2.min.js'))}"/>
    <script src="{!JSENCODE(URLFOR($Resource.GSVendor,'js/vendor/jquery/jquery-UI-1.10/js/jquery.ui.min.js'))}"></script>
    <script src="{!JSENCODE(URLFOR($Resource.GSVendor,'js/vendor/jquery/jquery.timepicker.min.js'))}"></script>

    <apex:includeScript value="{!JSENCODE(URLFOR($Resource.JBCXM__NS, 'NS/newStack/js/restclient/restClient.js'))}" />
    <script src="{!JSENCODE(URLFOR($Resource.GSVendor, 'js/vendor/multiple-select/jquery.multiple.select.js'))}"></script>

    <script src="{!JSENCODE(URLFOR($Resource.GSVendor, 'js/vendor/multiple-select/jquery.multiselect.filter.js'))}"></script>
    <script src="{!JSENCODE(URLFOR($Resource.GSVendor,'js/vendor/underscore-min.js'))}"></script>
    <script src="{!JSENCODE(URLFOR($Resource.GSVendor,'js/vendor/jstree/jstree.min.js'))}"></script>

    <script src="{!JSENCODE(URLFOR($Resource.GSVendor,'js/vendor/underscore-min.js'))}"></script>
    <script src="{!JSENCODE(URLFOR($Resource.GSVendor,'js/vendor/backbone-min.js'))}"></script>
    <script src="{!JSENCODE(URLFOR($Resource.GSVendor, 'js/vendor/ui.tabs.paging.js'))}"></script>
    <script type="text/javascript" src="{!JSENCODE(URLFOR($Resource.GSVendor,'js/vendor/date/moment.2.13.0.min.js'))}"></script>
    <script type="text/javascript" src="{!JSENCODE(URLFOR($Resource.GSVendor,'js/vendor/date/moment-timezone-with-data.0.5.3.min.js'))}"></script>
    <script src="{!JSENCODE(URLFOR($Resource.GSVendor,'js/vendor/velocity/velocity.min.js'))}"></script>
    <script src="{!JSENCODE(URLFOR($Resource.GSVendor,'js/vendor/require.min.js'))}"></script>

    <apex:stylesheet value="{!JSENCODE(URLFOR($Resource.JBCXM__GSVendor, 'js/vendor/growl/jquery.growl.css'))}"/>
    <script src="{!JSENCODE(URLFOR($Resource.GSVendor,'js/vendor/growl/jquery.growl.js'))}"></script>
    <apex:stylesheet value="{!JSENCODE(URLFOR($Resource.JBCXM__GSAppCSS, 'bootstrap/bootstrap.css'))}"/> 
    <link rel="stylesheet" type="text/css" href="{!JSENCODE(URLFOR($Resource.GSAppCSS, 'css/rules/rules-engine.css'))}"/>
    <!-- <link rel="stylesheet" type="text/css" href="https://localhost/UI/GSAppCSS/css/dataintegration/dataintegration.css"/> -->
    <link rel="stylesheet" type="text/css" href="{!JSENCODE(URLFOR($Resource.GSAppCSS, 'css/scheduler.css'))}"/>
    <apex:stylesheet value="{!JSENCODE(URLFOR($Resource.JBCXM__JQuery, 'css/redmond/jquery-ui-1.8.11.custom.css'))}"/>
    <apex:stylesheet value="{!JSENCODE(URLFOR($Resource.JBCXM__GSAppCSS, 'css/reports/themes/default/style.min.css'))}"/>
    <apex:stylesheet value="{!JSENCODE(URLFOR($Resource.JBCXM__Styles,'css/core/gsAppContainer.css'))}" />
    <apex:stylesheet value="{!JSENCODE(URLFOR($Resource.JBCXM__GSAppCSS, 'css/CS360/gsApps-new.css'))}"/>
    <apex:stylesheet value="{!JSENCODE(URLFOR($Resource.JBCXM__GSAppCSS, 'css/dataintegration/dataintegration.css'))}"/>
    <apex:stylesheet value="{!JSENCODE(URLFOR($Resource.JBCXM__Styles, 'css/module/connectors/zendesk.css'))}" />
    <script src="{!JSENCODE(URLFOR($Resource.GSVendor, 'js/vendor/jquery.htmlClean.min.js'))}"></script>


    <script type="text/javascript">
        var j$ = $.noConflict();
        window.jLatest = j$;
    </script>

    <script>

        var GS = GS || {};

            GS.userConfig = {
            	userLocale  : JSON.parse(JSON.stringify({!(dateTimeFormatByLocale)})),
                userName    : "{!$User.FirstName}"+" "+"{!$User.LastName}",
                userId      : "{!$User.Id}",
                emailId     : "{!$User.Email}",
                gainsightTabs: {!(gainsightTabs)},
                isLightningEnabled: {!(isLightningEnabled)}
            };

           GS.remotingEndPoint = "{!$RemoteAction.NSRemoting.integrationRequestBroker}";
           GS.commonRemotingEndPoint  = "{!$RemoteAction.GSCommonBroker.gsCommonRequestBroker}";
           GS.adminRemotingEndPoint = '{!$RemoteAction.AdminBroker.adminRequestBroker}';
           GS.remoting = "{!$RemoteAction.NSRemoting.apinsinvoke}";
           GS.sessionId = "{!NSSessionId}";
           GS.orgId = "{!$Organization.Id}";
           GS.dateFormatMap = JSON.parse(JSON.stringify({!(dateTimeFormatByLocale)}));
           GS.apiVersion = "V5_0";

            require.config({
                baseUrl : "",
                    paths : {
                    'framework': "{!JSENCODE(URLFOR($Resource.GSApp,'js/Gainsight'))}",
                    //'framework': "https://localhost/C-UI/GSApp/js/Gainsight",
                    'vendor' : "{!JSENCODE(URLFOR($Resource.GSVendor,'js/vendor'))}",
                    'text' : "{!JSENCODE(URLFOR($Resource.GSVendor,'js/vendor/text'))}",
                    'async':"{!JSENCODE(URLFOR($Resource.GSVendor,'js/vendor/async'))}",
                    'src':"{!JSENCODE(URLFOR($Resource.src,''))}"
                },
                config: {
                    text: {
                            useXhr: function(url, protocol, hostname, port) {
                                return true;
                            }
                    }
                },
                //urlArgs: "bust=" +  (new Date()).getTime()

            });

            /*var eventMethod = window.addEventListener ? "addEventListener" : "attachEvent";
			var eventer = window[eventMethod];
			var messageEvent = eventMethod == "attachEvent" ? "onmessage" : "message";
			eventer(messageEvent, function (e) {
					GS.isGAAuthorized = messageEvent.data;
					if(typeof window.test == "function")
						test(e);
			}, false);*/


            j$(document).ready(function() {
              require(["src/js/com/gainsight/app/core/components/containers/sfdc/app/AppContainer"], function(AppContainer){
                   var appContainer = new AppContainer();
                   var deferred = appContainer.init();
                    deferred.done(function(){
                        require([
                                    "framework/views/integrations/IntegrationsListView",
                                    "framework/utils/jQueryProxy"
                                ], function(IntegrationsListView, jQ){

                            var integrationView =  new IntegrationsListView({
                                    el:jQ(".fluid")
                                });
                           appContainer.registerModule(integrationView,"Administration","Connectors",{"id":"administration-operations-connectors"});
                        });
                    })
               })
            });

    </script>

    <html>
    <body>
    <div id="gs-app-container">
        <div class="workflow-wrapper gs-module-container">
            <div class="workflow-ctn">
                <div class="content">
                    <div class="fluid">
                        <div class="listContainer"></div>
                        <div class="inte_container">
                            <div id="integration-loading-spinner">
                                <div class="preloader-wrapper active"> <div class="spinner-layer spinner-blue-only"> <div class="circle-clipper left"> <div class="circle"></div> </div><div class="gap-patch"> <div class="circle"></div> </div><div class="circle-clipper right"> <div class="circle"></div> </div> </div> </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </body>
    </html>

   

    <apex:form ></apex:form>

    <script>
    	var GSGA = {
			orgId: "{!$Organization.Id}",
			orgName: "{!$Organization.Name}",
			userName: "{!$User.FirstName}"+" "+"{!$User.LastName}"
		};
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	</script>
    <script src="{!JSENCODE(URLFOR($Resource.CustomJS,'CustomJS/analyticsWrapper.js'))}"></script>
    <script>
		gainsightTrackEvents.pushPageViews('Integrations');
	</script>

</apex:page>